{% extends "store/base.html" %}
{% block content %}
<h2 class="mb-4">ðŸ›’ Your Cart</h2>

{% if items %}
<div class="table-responsive">
<table class="table table-bordered table-striped align-middle text-center">
  <thead class="table-dark">
    <tr>
      <th>Product</th>
      <th>Qty</th>
      <th>Price (â‚¹)</th>
      <th>Total (â‚¹)</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
    <tr>
      <td>{{ item.product.name }}</td>
      <td>
           <form method="post" action="{% url 'update_cart' item.product.id %}" class="d-flex">
        {% csrf_token %}
        <button type="submit" name="action" value="decrease" class="btn btn-outline-secondary btn-sm me-1">â€“</button>
        <input type="text" name="qty" value="{{ item.qty }}" readonly class="form-control text-center w-25 me-1">
        <button type="submit" name="action" value="increase" class="btn btn-outline-secondary btn-sm">+</button>
    </form>
      </td>
      <td>â‚¹{{ item.product.price_with_gst|floatformat:2 }}</td>
      <td>â‚¹{{ item.total|floatformat:2 }}</td>
      <td>
        <a href="{% url 'remove_from_cart' item.product.id %}" class="btn btn-danger btn-sm">Remove</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>

<div class="d-flex justify-content-between align-items-center mt-3">
  <h4>Grand Total: â‚¹{{ total|floatformat:2 }}</h4>
  <a href="{% url 'checkout' %}" class="btn btn-success btn-lg">Proceed to Checkout</a>
</div>

{% else %}
<div class="alert alert-info">Your cart is empty.</div>
{% endif %}
{% endblock %}
